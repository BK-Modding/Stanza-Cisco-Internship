<div class="spinner" ng-show="userloading">
    <link rel="stylesheet" type="text/css" href="css/loading.css" />
    <div id="loader" bgcolor="#212121">
        <img id="dot" class="dots_r" src="Images/loading/dot.svg" />
        <img id="dot1" class="dots_r" src="Images/loading/dot1.svg" />
        <img id="dot2" class="dots_r" src="Images/loading/dot2.svg" />
        <img id="dot3" class="dots_r" src="Images/loading/dot3.svg" />
        <img id="dot4" class="dots_r" src="Images/loading/dot4.svg" />
        <img id="dot5" class="dots_r" src="Images/loading/dot5.svg" />
        <img id="dot6" class="dots_r" src="Images/loading/dot6.svg" />

        <img id="dot7" class="dots_l" src="Images/loading/dot7.svg" />
        <img id="dot8" class="dots_l" src="Images/loading/dot8.svg" />
        <img id="dot9" class="dots_l" src="Images/loading/dot9.svg" />
        <img id="dot10" class="dots_l" src="Images/loading/dot10.svg" />
        <img id="dot11" class="dots_l" src="Images/loading/dot11.svg" />
        <img id="dot12" class="dots_l" src="Images/loading/dot12.svg" />
        <img id="dot13" class="dots_l" src="Images/loading/dot13.svg" />
        <img id="book" src="Images/loading/book.png" />
    </div>
</div>
<style type="text/css">
    #followinglist {
        max-height: 100px;
        overflow: scroll;
        list-style-type: none;
        /* not sure if you need this. Hides bullet list dots */
    }

    #followerslist {
        max-height: 100px;
        overflow: scroll;
        list-style-type: none;
        /* not sure if you need this. Hides bullet list dots */
    }
</style>
<div class="section grey darken-4" ng-show="userPage">
    <div class="row">
        <div class="s9 offset-s2">
            <div class="card-panel teal black-text col s8 offset-s1 z-depth-0">
                <div class="row valign-wrapper">
                    <div class="col s3">
                        <img ng-src="{{profilePicture}}" class="circle responsive-img">
                        <!-- notice the "circle" class -->
                    </div>
                    <!--Featured book next to profile pic-->
                    <div class="col s2">
                        <div class="row valign-wrapper">
                            <span class="black-text col s8 offset-s2">
                                <h4>{{name}}</h4>
                            </span>
                        </div>
                        <div class="row">
                            <div ng-if="!isMe">
                                <div ng-if="followed">
                                    <div class="col s5">
                                        <a ng-click="follow()" class="waves-effect waves-teal white btn-flat black-text">UnFollow</a>
                                    </div>
                                </div>
                                <div ng-if="!followed">
                                    <div class="col s5">
                                        <a ng-click="follow()" class="waves-effect waves-teal teal darken-2 btn-flat black-text">Follow</a>
                                    </div>
                                </div>
                            </div>
                            <!--    <div class="col s5">
                                <a class="waves-effect waves-teal teal lighten-1 btn-flat col white-text">Chat</a>
                            </div> -->
                        </div>
                    </div>

                    <!-- featured books -->
                    <!--
                    <div class="col s3" id="featured">
                        <h5>Featured Books</h5>
                        <div ng-show="featured == 0">
                            <div ng-if="isMe">
                                <span class="flow-text"><h6> You have no featured books, go select some from your books</h6></span>
                            </div>
                            <div ng-if="!isMe">
                                <span class="flow-text"><h6>This person has no featured books</h6></span>
                            </div>
                        </div>
                        <div ng-show="featured > 0 && featured <= 3">
                            <div class="row">
                                <div ng-repeat="featuredbook in featuredbooks">
                                    <div class="col s4">
                                        <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img width = 40% height = 10% ng-src = "{{featuredbook.image}}"></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ng-show="featured > 3">
                            <div class="row">
                                <div ng-repeat="featuredbook in firsthalffeaturedbooks">
                                    <div class="col s4">
                                        <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img width = 40% height = 10% ng-src = "{{featuredbook.image}}"></a>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div ng-repeat="featuredbook in lasthalffeaturedbooks">
                                    <div class="col s4">
                                        <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img width = 40% height = 10% ng-src = "{{featuredbook.image}}"></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    -->
                    <div class="col s5" id="sidebar">
                        <div class="card-panel teal z-depth-0">

                            <div class="row">
                                <div class="col s12">
                                    <ul class="tabs">
                                        <li class="tab"><a class="active teal-text" href="#followers">Followers</a></li>
                                        <li class="tab"><a href="#following" class="teal-text">Following</a></li>
                                    </ul>
                                </div>
                                <div id="followers" class="col s12">
                                    <ul class="collection" id="followerslist">
                                        <div ng-repeat="follower in followers">
                                            <li class="collection-item">
                                                <a href="" ng-click="openUser(follower)">{{follower.name}}</a>
                                            </li>
                                        </div>
                                    </ul>
                                </div>
                                <div id="following" class="col s12">
                                    <ul class="collection" id="followinglist">
                                        <div ng-repeat="follower in following">
                                            <li id="followingitem" class="collection-item"><a href="" ng-click="openUser(follower)">{{follower.name}}</a></li>
                                        </div>
                                    </ul>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Feautred Books and Follower stuff-->
    <div class="row">
        <div class="s9 offset-s2">
            <div ng-if="featured != 0">
                <div ng-if="books.length == 0">
                    <div class="col s6 offset-s2" id="featured">
                        <div class="card-panel white z-depth-0">
                            <h5 class="center-align">Featured Books</h5>

                            <div ng-if="featured == 1">
                                <div class="row">
                                    <div ng-repeat="featuredbook in featuredbooks">
                                        <div class="col s12">
                                            <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img class="responsive-img" ng-src = "{{featuredbook.image}}"></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div ng-if="featured == 2">
                                <div class="row">
                                    <div ng-repeat="featuredbook in featuredbooks">
                                        <div class="col s6">
                                            <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img class="responsive-img" ng-src = "{{featuredbook.image}}"></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div ng-if="featured == 3">
                                <div class="row">
                                    <div ng-repeat="featuredbook in featuredbooks">
                                        <div class="col s4">
                                            <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img class="responsive-img" ng-src = "{{featuredbook.image}}"></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div ng-if="featured > 3">
                                <div class="row">
                                    <div ng-repeat="featuredbook in firsthalffeaturedbooks">
                                        <div class="col s4">
                                            <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img class="responsive-img" ng-src = "{{featuredbook.image}}"></a>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div ng-repeat="featuredbook in lasthalffeaturedbooks">
                                        <div class="col s4">
                                            <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img class="responsive-img" ng-src = "{{featuredbook.image}}"></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div ng-if="books.length != 0">
                    <div class="col s3 offset-s1" id="featured">
                        <div class="card-panel white z-depth-0">
                            <h5 class="center-align">Featured Books</h5>

                            <div ng-if="featured == 1">
                                <div class="row">
                                    <div ng-repeat="featuredbook in featuredbooks">
                                        <div class="col s12">
                                            <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img class="responsive-img" ng-src = "{{featuredbook.image}}"></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div ng-if="featured == 2">
                                <div class="row">
                                    <div ng-repeat="featuredbook in featuredbooks">
                                        <div class="col s6">
                                            <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img class="responsive-img" ng-src = "{{featuredbook.image}}"></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div ng-if="featured == 3">
                                <div class="row">
                                    <div ng-repeat="featuredbook in featuredbooks">
                                        <div class="col s4">
                                            <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img class="responsive-img" ng-src = "{{featuredbook.image}}"></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div ng-if="featured > 3">
                                <div class="row">
                                    <div ng-repeat="featuredbook in firsthalffeaturedbooks">
                                        <div class="col s4">
                                            <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img class="responsive-img" ng-src = "{{featuredbook.image}}"></a>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div ng-repeat="featuredbook in lasthalffeaturedbooks">
                                        <div class="col s4">
                                            <a class="waves-effect waves-light modal-trigger" href="" ng-click="openModal(featuredbook, true)"><img class="responsive-img" ng-src = "{{featuredbook.image}}"></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="featured == 0">
                <div class="col s6 offset-s2" id="all">
                    <div ng-show="books.length > 0">
                        <div class="card-panel white z-depth-0">


                            <ul class="collection">
                                <div ng-repeat="book in books">
                                    <li class="collection-item teal-text avatar">
                                        <img ng-src="{{book.image}}" alt="" class="circle materialboxed">
                                        <span class="title"><a href = "" class = "modal-trigger" ng-click = "openModal(book, false)">{{book.bookname}}</a></span>
                                        <p>By: <a href="" ng-click="openAuthor(book.author)">{{book.author}}</a>
                                        </p>
                                        <div ng-show="featured < 6">
                                            <div ng-if="isMe">
                                                <a href="" class="btn waves-effect teal accent-4" ng-click="addFeaturedBooks(book)">Add to featured books</a>
                                            </div>
                                        </div>
                                        <p class="truncate"><a href="" class="modal-trigger" ng-click="openModal(book, false)">Description: {{book.description}}</a></p>
                                        <div class="row">
                                        </div>
                                    </li>
                                </div>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="featured != 0">
                <div class="col s4 offset-s1" id="all">
                    <div ng-show="books.length > 0">
                        <div class="card-panel white z-depth-0">

                            <ul class="collection">
                                <div ng-repeat="book in books">
                                    <li class="collection-item teal-text avatar">
                                        <img ng-src="{{book.image}}" alt="" class="circle materialboxed">
                                        <span class="title"><a href = "" class = "modal-trigger" ng-click = "openModal(book, false)">{{book.bookname}}</a></span>
                                        <p>By: <a href="" ng-click="openAuthor(book.author)">{{book.author}}</a>
                                        </p>
                                        <div ng-show="featured < 6">
                                            <div ng-if="isMe">
                                                <a href="" class="btn waves-effect teal accent-4" ng-click="addFeaturedBooks(book)">Add to featured books</a>
                                            </div>
                                        </div>
                                        <p class="truncate"><a href="" class="modal-trigger" ng-click="openModal(book, false)">Description: {{book.description}}</a></p>
                                        <div class="row">
                                        </div>
                                    </li>
                                </div>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!--Followers tab-->



    </div>


    <div id="modal" class="modal modal-fixed-footer white">
        <div class="row">
            <div class="modal-content">
                <div class="col s6 center-align">
                    <img class="responsive-img" ng-src="{{modalbook.image}}">
                </div>
                <div class="col s6 white darken-4">
                    <h4>{{modalbook.bookname}}</h4>
                    <h5>By {{modalbook.author}}</h5>
                    <h6>{{modalbook.genre}}</h6>
                    <div class="divider"></div>
                    <p>{{modalbook.description}}</p>
                </div>
            </div>
        </div>
        <div class="modal-footer white">
            <div ng-if="isMe">
                <div ng-if="modalfeatured">
                    <a ng-click="removeFeaturedBooks(modalbook)" class="modal-action modal-close waves-effect waves-green btn-flat teal accent-4 s2 white-text">Remove from featured books</a>
                </div>
                <div ng-if="!modalfeatured">
                    <a class="modal-action modal-close waves-effect waves-green btn-flat teal accent-4 s2 white-text" ng-click="addFeaturedBooks(modalbook)">Add to featured books</a>
                </div>
            </div>
            <div ng-show="!isMe">
                <a ng-click="borrow(modalbook)" id="borrowBtn" class="modal-action modal-close waves-effect waves-green btn-flat teal accent-4 s2 white-text">Borrow</a>
            </div>
        </div>

    </div>
</div>

<script type="text/javascript">
    $(document).ready(function() {
        $('.materialboxed').materialbox();
    });
    $(document).ready(function() {
        $('ul.tabs').tabs();
    });
</script>
